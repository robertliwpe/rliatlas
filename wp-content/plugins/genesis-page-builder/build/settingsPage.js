!function(e){var t={};function n(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=52)}({0:function(e,t,n){var s;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var o=typeof s;if("string"===o||"number"===o)e.push(s);else if(Array.isArray(s)&&s.length){var i=r.apply(null,s);i&&e.push(i)}else if("object"===o)for(var a in s)n.call(s,a)&&s[a]&&e.push(a)}}return e.join(" ")}void 0!==e&&e.exports?(r.default=r,e.exports=r):void 0===(s=function(){return r}.apply(t,[]))||(e.exports=s)}()},3:function(e,t,n){"use strict";function s(){return genesis_page_builder_globals.blockSettingsPermissions}function r(){var e=[];return wp.blocks.getBlockTypes().map(function(t){(t.name.startsWith("genesis-blocks")||t.name.startsWith("genesis-page-builder"))&&e.push(t)}),e=e.filter(function(e){return e.hasOwnProperty("gb_settings_data")||e.hasOwnProperty("gpb_settings_data")})}function o(){return genesis_page_builder_globals.allRoles}n.r(t),n.d(t,"getBlockSettingsPermissions",function(){return s}),n.d(t,"get_registered_gpb_blocks",function(){return r}),n.d(t,"getAllRoles",function(){return o}),wp.hooks.addFilter("gb_should_render_block_setting","gpb",function(e,t,n,r){var o=s();return void 0===o[t]||void 0===o[t][n]?e:r.roles.some(function(e){return!0===o[t][n][e]})})},52:function(e,t,n){"use strict";n.r(t),n.d(t,"App",function(){return B});var s=n(3),r=n(0),o=n.n(r);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(n,!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],s=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(s=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);s=!0);}catch(e){r=!0,o=e}finally{try{s||null==a.return||a.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var f=window.React,m=f.Component,k=f.useState,v=f.useEffect,y=wp.i18n.__,h=wp.components.Fill,E=wp.plugins.registerPlugin,_=wp.hooks.addAction,O=wp.data.dispatch,w=wp.apiFetch,j="block_settings_permissions",x=function(e){return f.createElement(f.Fragment,null,f.createElement("label",null,f.createElement("input",{type:"checkbox",name:e.checkboxName,value:e.role.toLowerCase(),checked:e.checked,onChange:function(t){return e.onClick(t)},"data-setting":e.setting,"data-block":e.block}),e.role))},P=function(e){return f.createElement("fieldset",null,f.createElement("legend",{className:"screen-reader-text"},f.createElement("span",null,y("Roles","genesis-page-builder"))),Object.values(e.roles).map(function(t){var n=!0;if(void 0!==e.permissions[e.block]&&void 0!==e.permissions[e.block][e.setting.name]){var s=t.name.toLowerCase();n=e.permissions[e.block][e.setting.name][s]}return f.createElement(x,{key:"key_"+e.block+"_"+e.setting.name+"_"+t.name.toLowerCase(),block:e.block,role:t.name,setting:e.setting.name,checkboxName:"genesis-page-builder-settings[block_settings_permissions][".concat(e.block,"][").concat(e.setting.name,"][]"),checked:n,onClick:e.onClick})}))},S=function(e){var t=b(k(e.allExpanded||e.isOpen),2),n=t[0],s=t[1];return v(function(){var t=e.allExpanded||e.isOpen;s(t)},[e.isOpen]),f.createElement("div",{key:"key_"+e.setting,className:o()("gpb-control-settings-control-settings-entry",n?"gpb-control-settings-entry-open":null)},f.createElement("div",{className:"gpb-control-settings-block-setting"},e.setting.title),f.createElement("div",{className:"gpb-control-settings-block-permission"},f.createElement(P,{roles:e.roles,permissions:e.permissions,setting:e.setting,block:e.block.name,onClick:e.onClick})),f.createElement("div",{onClick:function(){s(!n)},className:"gpb-control-settings-block-toggle"},f.createElement("span",{className:o()("dashicons",n?"dashicons-arrow-up-alt2":"dashicons dashicons-arrow-down-alt2")})))},C=function(e){var t=b(k(e.isOpen),2),n=t[0],s=t[1];return v(function(){s(e.isOpen)},[e.isOpen]),f.createElement(f.Fragment,null,f.createElement("div",{className:"gpb-control-settings-block"},f.createElement("div",null,e.block.title),f.createElement("div",{className:"gpb-control-settings-entry-header"},f.createElement("span",null,y("Block Settings Permissions","genesis-page-builder"))),f.createElement("div",{onClick:function(){s(!n)},className:"gpb-control-settings-block-toggle"},f.createElement("span",{className:o()("dashicons",n?"dashicons-arrow-up-alt2":"dashicons dashicons-arrow-down-alt2")}))),f.createElement("div",{className:o()("gpb-control-settings-control-settings",n?"gpb-control-settings-control-settings-open":null)},void 0!==e.settings&&Object.keys(e.settings).map(function(t){return f.createElement(S,{key:"key_"+e.block.name+"_"+t,roles:e.roles,permissions:e.permissions,setting:{name:t,title:e.settings[t].title},block:e.block,onClick:e.onClick,isOpen:e.allExpanded,allExpanded:e.allExpanded})})))},N=function(e){return f.createElement("div",{className:"gpb-control-settings-entry"},f.createElement(C,{roles:e.roles,settings:e.settings[e.block.name],permissions:e.permissions,block:e.block,onClick:e.onClick,isOpen:e.isOpen,allExpanded:e.allExpanded}))},A=function(e){return f.createElement("div",{className:"gpb-control-settings-entries"},e.blocks.map(function(t){return f.createElement(N,{key:"key_"+t.name,settings:e.settings,roles:e.roles,block:t,onClick:e.onClick,permissions:e.permissions,isOpen:e.allExpanded,allExpanded:e.allExpanded})}))},B=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?g(e):t}(this,p(t).call(this,e))).state={permissions:e.permissions||{},allExpanded:!1},n.updatePermissionsState=n.updatePermissionsState.bind(g(n)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,m),function(e,t,n){t&&u(e.prototype,t),n&&u(e,n)}(t,[{key:"updatePermissionsState",value:function(e){var t=O("genesis-blocks/global-settings").updateCustom,n=this.state.permissions;void 0===n[e.target.dataset.block]&&(n[e.target.dataset.block]={}),void 0===n[e.target.dataset.block][e.target.dataset.setting]&&(n[e.target.dataset.block][e.target.dataset.setting]={}),void 0===n[e.target.dataset.block][e.target.dataset.setting][e.target.value]&&(n[e.target.dataset.block][e.target.dataset.setting][e.target.value]={}),n[e.target.dataset.block][e.target.dataset.setting][e.target.value]=e.target.checked,this.setState({permissions:n}),t({key:j,value:n})}},{key:"render",value:function(){var e=this;return f.createElement("div",{className:"gpb-control-settings"},f.createElement("div",{className:"gpb-control-settings-head"},f.createElement("div",null,y("Block Name","genesis-page-builder")),f.createElement("div",null),f.createElement("div",null,f.createElement("span",{onClick:function(){e.setState({allExpanded:!0})},className:o()("gpb-control-settings-expand-all",this.state.allExpanded?"gpb-hidden":null)},y("Expand All","genesis-page-builder")),f.createElement("span",{onClick:function(){e.setState({allExpanded:!1})},className:o()("gpb-control-settings-collapse-all",this.state.allExpanded?"gpb-visible":null)},y("Collapse All","genesis-page-builder")))),f.createElement(A,{settings:this.props.settings,roles:this.props.roles,blocks:this.props.blocks,onClick:function(t){e.updatePermissionsState(t)},permissions:this.state.permissions,allExpanded:this.state.allExpanded}))}}]),t}(),R=function(e){var t={};return Object.values(e).map(function(e){void 0!==e.gb_settings_data&&(t[e.name]=e.gb_settings_data),void 0!==e.gpb_settings_data&&(t[e.name]=e.gpb_settings_data)}),t};E("genesis-pro-permission-settings",{render:function(){var e=Object(s.get_registered_gpb_blocks)(),t=Object(s.getBlockSettingsPermissions)();return f.createElement(h,{name:"GenesisBlocksSettings_block_permissions_section"},f.createElement(B,{blocks:e,settings:R(e),roles:Object(s.getAllRoles)(),permissions:function(e){if(Object.keys(e).length>0)return e;for(var t=Object.keys(Object(s.getAllRoles)()).reduce(function(e,t){return e[t]=!0,e},{}),n=R(Object(s.get_registered_gpb_blocks)()),r=0,o=Object.entries(n);r<o.length;r++){var i=b(o[r],2),a=i[0],c=i[1];for(var u in c)n[a][u]=l({title:n[a][u].title},t)}return n}(t)}))}});_("genesisBlocks.savingSettings","genesisBlocks",function(e,t){if(t.hasOwnProperty(j)){for(var n=0,s=Object.entries(t[j]);n<s.length;n++){var r=b(s[n],2),o=r[0],i=r[1];for(var a in i)delete t[j][o][a].title}w({path:"/genesis-page-builder/v1/block-permissions",method:"PUT",data:t[j]})}})}});